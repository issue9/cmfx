/*
 * SPDX-FileCopyrightText: 2024 caixw
 *
 * SPDX-License-Identifier: MIT
*/

@import 'material-symbols';
@import './theme.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

.material-symbols-outlined {
    font-size: 1.3rem;
    box-sizing: border-box;
    flex: 0 0 0%;
}

.material-symbols-outlined.filled {
    font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 48;
}

@layer components {
    .scheme--primary {
        --bg: var(--primary-bg);
        --bg-low: var(--primary-bg-low);
        --bg-high: var(--primary-bg-high);
        --text: var(--primary-text);
        --text-low: var(--primary-text-low);
        --text-high: var(--primary-text-high);
    }

    .scheme--secondary {
        --bg: var(--secondary-bg);
        --bg-low: var(--secondary-bg-low);
        --bg-high: var(--secondary-bg-high);
        --text: var(--secondary-text);
        --text-low: var(--secondary-text-low);
        --text-high: var(--secondary-text-high);
    }

    .scheme--tertiary {
        --bg: var(--tertiary-bg);
        --bg-low: var(--tertiary-bg-low);
        --bg-high: var(--tertiary-bg-high);
        --text: var(--tertiary-text);
        --text-low: var(--tertiary-text-low);
        --text-high: var(--tertiary-text-high);
    }

    .scheme--error {
        --bg: var(--error-bg);
        --bg-low: var(--error-bg-low);
        --bg-high: var(--error-bg-high);
        --text: var(--error-text);
        --text-low: var(--error-text-low);
        --text-high: var(--error-text-high);
    }

    .scheme--surface {
        --bg: var(--surface-bg);
        --bg-low: var(--surface-bg-low);
        --bg-high: var(--surface-bg-high);
        --text: var(--surface-text);
        --text-low: var(--surface-text-low);
        --text-high: var(--surface-text-high);
    }

    .icon-container {
        @apply inline-flex items-center text-center;
    }

    /***************************** button **************************/

    .button {
        @apply border border-transparent rounded-md text-sm py-1 px-2 md:py-2 md:px-4;
        @apply disabled:cursor-not-allowed hover:enabled:bg-[var(--bg-high)];
    }

    .button.filled {
        background-color: var(--bg);
    }

    .button.bordered {
        @apply bg-transparent border-[var(--text)];
    }

    .button.flated {
        @apply bg-transparent hover:enabled:bg-[var(--bg-high)];
    }

    .icon-button {
        /* 始终要让 p-1 和 p-2 与 .button 中的 py 和 md:py 相同 */
        @apply border border-transparent rounded-md text-sm p-1 md:p-2;
        @apply disabled:cursor-not-allowed hover:enabled:bg-[var(--bg-high)];
    }

    .icon-button.filled {
        background-color: var(--bg);
    }

    .icon-button.bordered {
        @apply bg-transparent border-[var(--text)];
    }

    .icon-button.flated {
        @apply bg-transparent hover:enabled:bg-[var(--bg-high)];
    }

    .button-group {
        color: var(--text);
        background-color: var(--bg);
        @apply border-solid border border-transparent inline-block rounded-l-md rounded-r-md text-sm;

        :first-child {
            @apply rounded-l-md;
        }

        :last-child {
            @apply rounded-r-md;
        }

        button {
            color: var(--text);
            @apply text-sm py-1 px-2 md:py-2 md:px-4 disabled:cursor-not-allowed hover:enabled:bg-[var(--bg-high)];
        }
    }

    .button-group.rounded {
        @apply rounded-l-full rounded-r-full border-transparent;

        :first-child {
            @apply rounded-l-full;
        }

        :last-child {
            @apply rounded-r-full;
        }
    }

    .button-group.filled {
        background-color: var(--bg);
    }

    .button-group.bordered {
        color: var(--bg);
        background-color: transparent;
        @apply border border-solid border-[var(--bg)];
    }

    .button-group.flated {
        background-color: transparent;
        color: var(--bg);

        button {
            @apply hover:enabled:bg-[var(--bg-high)] hover:enabled:text-[var(--text)];
        }
    }

    /***************************** form-radio **************************/

    .radio-group {
        label {
            @apply border-2 border-transparent icon-container;

            .radio-icon {
                color: var(--text);
                @apply mr-1;
            }
        }

        label.border {
            @apply border-[var(--text-low)] rounded-sm has-[:checked]:border-[var(--bg)];
        }

        .content {
            @apply flex flex-wrap gap-1
        }
    }

    .radio-group:enabled {
        label.border {
            @apply hover:border-[var(--bg-high)];
        }

        label:hover .radio-icon {
            color: var(--bg-high);
        }
    }

    .radio-group:disabled {
        cursor: not-allowed;

        label {
            cursor: not-allowed;

            .radio-icon {
                cursor: not-allowed;
            }
        }
    }

    /***************************** form-checkbox **************************/

    .checkbox {
        @apply border-2 border-transparent icon-container;

        .checkbox-icon {
            color: var(--text-low);
            @apply mr-1;
        }
    }

    .checkbox.border {
        @apply border-[var(--text-low)] rounded-sm has-[:checked]:border-[var(--bg)];
    }

    .checkbox:has(:enabled):hover {
        cursor: pointer;

        .checkbox-icon {
            color: var(--text-high);
        }
    }

    .checkbox.border:has(:enabled):hover {
        @apply border-[var(--bg-high)];
    }

    .checkbox:has(:disabled) {
        cursor: not-allowed;
    }

    .chk-group {
        .content {
            @apply flex flex-wrap gap-1
        }
    }

    /***************************** form-text-field **************************/

    .text-field {
        @apply rounded-sm outline-none outline-1 outline-inherit flex icon-container px-1 py-0 md:px-2 md:py-1 mt-1;
        @apply has-[:focus:enabled]:outline-[var(--text-high)] has-[:hover:enabled]:outline-[var(--text-high)];
        outline-color: var(--text-low);

        & input {
            @apply outline-none bg-transparent flex-1 px-1 w-full disabled:cursor-not-allowed read-only:cursor-default;
        }
    }

    /***************************** form-textarea **************************/

    .textarea {
        text-align: left !important;
        @apply rounded-sm bg-transparent outline-none outline-1 outline-inherit flex icon-container px-1 py-1 md:px-2 md:py-2 mt-1 w-full;
        @apply focus:enabled:outline-[var(--text-high)] hover:enabled:outline-[var(--text-high)] disabled:cursor-not-allowed read-only:cursor-default;
        outline-color: var(--bg-low);
    }

    .field_error {
        @apply text-sm text-error min-h-5;
    }

    /***************************** error **************************/

    .error-page {
        background-color: var(--bg);
        color: var(--text);
        @apply p-8 mx-auto w-full h-full content-center text-center;

        & h1 {
            @apply mb-4 text-7xl md:text-9xl tracking-tight font-extrabold;
        }

        .title {
            @apply mb-4 tracking-tight font-bold text-3xl md:text-4xl;
        }

        .detail {
            @apply mb-4 tracking-tight font-bold text-lg;
        }
    }

    /***************************** divider **************************/

    .divider {
        color: var(--text);
        @apply flex content-center items-center;

        hr {
            color: var(--text-low);
        }
    }

    /***************************** app **************************/

    .app {
        @apply flex flex-col box-border overflow-hidden h-dvh bg-surface text-surface;

        .app-bar {
            @apply w-dvw p-4 scheme--tertiary flex content-between bg-tertiary text-tertiary;
        }

        .app-main {
            @apply relative h-full flex-1 overflow-y-hidden;
        }
    }

    /***************************** notify **************************/

    .notify-wrapper {
        @apply absolute top-4 right-4 left-4 sm:left-auto flex-col;
        @apply sm:min-w-60 sm:max-w-[500px] sm:w-auto;

        .notify {
            background-color: var(--bg);
            color: var(--text);
            border-color: var(--bg-low);
            @apply rounded-md transition-[height] duration-100 mb-4 z-50 block w-full;

            .title {
                @apply p-3 flex justify-between icon-container;

                .close {
                    @apply material-symbols-outlined hover:cursor-pointer hover:text-[var(--text-high)];
                }
            }
        }
    }

    /***************************** drawer **************************/

    .drawer {
        @apply h-full w-full flex overflow-hidden;

        &>aside {
            @apply h-full bg-[var(--bg)] text-[var(--text)] transition-[width] duration-300;
        }

        >.hiden {
            @apply w-0;
        }

        &>main {
            @apply overflow-y-scroll h-full rounded-lg flex-1;
        }
    }

    /***************************** dropdown **************************/

    .dropdown {
        @apply relative;

        .content {
            color: var(--text);
            background-color: var(--bg);
            display: none;
            position: absolute;
        }

        .topleft {
            bottom: 100%;
            left: 0;
        }

        .topright {
            bottom: 100%;
            right: 0;
        }

        .bottomleft {
            top: 100%;
            left: 0;
        }

        .bottomright {
            top: 100%;
            right: 0;
        }

        .visible {
            @apply block;
        }
    }

    /***************************** badge **************************/

    .badge {
        position: relative;

        .content {
            background-color: var(--bg);
            color: var(--text);
            @apply absolute rounded-full text-center px-1 text-xs min-w-[14px] min-h-[14px];
        }

        .topleft {
            @apply top-[-7px] left-[-7px];
        }

        .topright {
            @apply top-[-7px] right-[-7px];
        }

        .bottomleft {
            @apply bottom-[-7px] left-[-7px];
        }

        .bottomright {
            @apply bottom-[-7px] right-[-7px];
        }
    }

    /***************************** list **************************/

    .list {
        @apply flex flex-col p-2 gap-1 min-w-[200px] rounded-md;
        color: var(--text);
        background-color: var(--bg);

        .item {
            @apply flex flex-col gap-y-1;

            .title {
                @apply rounded-md flex p-2 gap-1 icon-container cursor-pointer hover:bg-[var(--bg-low)] hover:text-[var(--text-low)];

                .tail {
                    @apply cursor-pointer rounded-full;
                    margin-left: auto;
                }
            }
        }

        .item.active {
            .title {
                background-color: var(--bg-high);
                color: var(--text-high);
            }
        }
    }
}

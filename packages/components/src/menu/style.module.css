/*
 * SPDX-FileCopyrightText: 2025 caixw
 *
 * SPDX-License-Identifier: MIT
 */

@reference '../style.css';

@layer components {

    nav.menu,
    menu.menu {
        @apply flex bg-palette-bg text-palette-fg;

        /* 显示下一级菜单的箭头 */
        .more-arrow {
            @apply rtl:rotate-180;
            @apply ltr:rotate-0;
        }

        li {
            @apply flex flex-col relative;

            >.title {
                @apply m-1 py-[--spacing(1.5)] px-3 cursor-pointer rounded-md;
                @apply flex flex-row items-center gap-1;

                .icon {
                    @apply aspect-square w-4;
                }

                .suffix {
                    @apply ms-auto;
                }
            }

            >ul {
                @apply box-content;
            }
        }

        li.group>.title {
            @apply text-palette-fg-low cursor-default !ps-1;
        }

        li.item.disabled>.title {
            @apply bg-surface-bg-low/50 text-surface-fg-low/50;
            @apply cursor-not-allowed;
        }

        li.item.selected>.title {
            @apply bg-palette-bg-high text-palette-fg-high;
        }

        li.item:not(.disabled):hover {
            >.title {
                @apply bg-palette-bg-high text-palette-fg-high;
            }

            >.title:active {
                @apply text-palette-fg-low;
            }
        }
    }

    /******************************* horizontal **********************************/

    nav.horizontal,
    menu.horizontal {
        @apply flex-row gap-2;

        >li.divider {
            @apply !px-0;
        }

        * li.divider {
            @apply !py-0;
        }

        >li>.title {
            @apply !mx-0 text-nowrap;
        }

        li>ul {
            @apply min-w-max z-popover pop fixed rounded-md shadow-md;
            @apply bg-palette-bg text-palette-fg;
            @apply border border-palette-fg-low;
        }

        li:not(.hide)>ul {
            @apply hidden flex-col popopen;
        }
    }

    /******************************* vertical **********************************/

    nav.vertical,
    menu.vertical {
        @apply flex-col;

        li.divider {
            @apply !py-0;
        }

        li>ul {
            @apply min-w-max z-popover pop fixed rounded-md shadow-md;
            @apply bg-palette-bg text-palette-fg;
            @apply border border-palette-fg-low;
        }

        li:not(.hide)>ul {
            @apply hidden popopen flex-col;
        }
    }

    /******************************* inline **********************************/

    nav.inline,
    menu.inline {
        @apply flex-col;

        >li>ul {
            @apply bg-palette-bg-low/50;
        }

        li {
            >ul {
                @apply flex flex-col !rounded-none;
            }
        }

        >li.divider {
            @apply !py-0;
        }

        * li.divider {
            @apply !px-0;
        }
    }

    /************************************************* context ********************/

    .dropdown {
        @apply border border-palette-fg-low rounded-md;
    }
}
